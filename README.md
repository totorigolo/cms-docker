# CMS Docker image

This image isn't finished yet. Here is a short list
of what is still missing:
  * impossible to configure the deployment

## How to use this Docker image?

CMS configuration is automatically generated from 
environment variables, since it's the Docker way
to pass variables to containers.

Here is a script to launch CMS with a contest already in DB:

```bash
#!/usr/bin/env bash
# Script to start a contest via the CMS Docker image
#
# Usage :
# $ ./start-cms.sh contest-id
#

docker run --privileged -p 38888:8888 -p 38889:8889 -p 38890:8890 -it \
    -e CMS_db_user=cmsuser \
    -e CMS_db_passwd=passw0rd \
    -e CMS_db_host=123.456.789.123 \
    -e CMS_RWS=ON \
    -e CMS_contest=$1 \
    totorigolo/cms
```

And here is another script to launch the image without 
starting the servers:

```bash
#!/usr/bin/env bash
# Script to run a bash in the CMS Docker image, in order to import a contest.
#
# Usage :
# $ bash ./import-contest.sh /absolute/path/to/contest
#

docker run --privileged -p 38888:8888 -p 38889:8889 -p 38890:8890 -it \
    -e CMS_db_user=cmsuser \
    -e CMS_db_passwd=passw0rd \
    -e CMS_db_host=123.456.789.123 \
    -v $1:/contest \
    totorigolo/cms
```

**Note that I assume here that totorigolo/cms is the image 
generated by this Dockerfile.**
